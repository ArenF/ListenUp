# ListenUp! 개발 TODO 목록

**최종 업데이트**: 2025-11-29
**작성자**: ListenUp! Team

---

## ✅ 완료된 작업

### 1. UI/UX 개선 - 실시간 반응 시스템 🎨 ✅ COMPLETED

**완료일**: 2025-11-28 ~ 2025-11-29
**커밋**: `0ea8042`
**보고서**: `docs/UI-UX 실시간 반응 시스템 구현 보고서.md`

#### 구현 내용
- [x] **정답 시 피드백**
  - ✅ 정답을 맞춘 유저의 네임바가 초록색으로 물들기
  - ✅ 애니메이션: pulse 효과 (1초)
  - ✅ 애니메이션 후 연한 초록색 상태 유지 (라운드 종료까지)

- [x] **오답 시 피드백**
  - ✅ 틀린 유저의 네임바가 붉은색으로 표시
  - ✅ 애니메이션: shake 효과 (0.6초)
  - ✅ 애니메이션 후 연한 빨간색 상태 유지 (라운드 종료까지)

- [x] **답안 제출 애니메이션**
  - ✅ 정답을 입력하면 네임바가 튀어오르는 애니메이션
  - ✅ Bounce 효과: 0.6초 지속

- [x] **점수 증가 애니메이션**
  - ✅ 점수가 올라갈 때 네임바 강조 효과
  - ✅ +점수 텍스트가 떠올라가는 효과 (1.5초)

- [x] **추가 구현 사항**
  - ✅ 라운드별 정답/오답 상태 관리 (Set 자료구조)
  - ✅ 자동 상태 초기화 (prepare-round 이벤트)
  - ✅ 실시간 정답/오답 동기화 (서버 isCorrect 필드 추가)

#### 기술 스택
- ✅ Svelte 5 reactive state
- ✅ CSS animations (keyframes)
- ✅ Socket.IO 이벤트 활용 (`answer-submitted`, `score-updated`, `prepare-round`)

#### 실제 작업 시간
약 3시간 (4개 파일, +333줄)

---

## 🎯 우선순위 높음

---

### 2. 힌트 시스템 구현 💡

**목표**: 플레이어들에게 시간 기반 힌트를 제공하여 게임 난이도 조절 및 재미 향상

#### 구현 내용

##### 2.1 백엔드 - 데이터 구조
- [ ] **PlaylistTrack 타입 확장**
  ```typescript
  interface PlaylistTrack {
    videoId: string;
    answers: string[];
    hints?: Hint[];  // 새로 추가
  }

  interface Hint {
    showAtSeconds: number;  // 힌트를 보여줄 시간 (라운드 시작 후)
    text: string;           // 힌트 텍스트
  }
  ```

- [ ] **플레이리스트 JSON 스키마 업데이트**
  ```json
  {
    "videoId": "M4EJqcTjNcY",
    "answers": ["인페르노", "インフェルノ"],
    "hints": [
      { "showAtSeconds": 10, "text": "힌트: 애니메이션 주제가" },
      { "showAtSeconds": 20, "text": "힌트: 불을 의미하는 단어" }
    ]
  }
  ```

##### 2.2 서버 - 힌트 전송 로직
- [ ] **GameService에 힌트 타이머 추가**
  - 라운드 시작 시 힌트 스케줄링
  - `setTimeout`으로 시간별 힌트 전송
  - Socket.IO 이벤트: `hint-shown`

##### 2.3 클라이언트 - 힌트 표시
- [ ] **힌트 UI 컴포넌트**
  - 화면 상단 또는 중앙에 힌트 표시
  - 페이드인/페이드아웃 애니메이션
  - 5초 후 자동으로 사라짐

##### 2.4 플레이리스트 관리 페이지
- [ ] **트랙별 힌트 설정 UI**
  - "힌트 추가" 버튼
  - 힌트 시간(초) 입력
  - 힌트 텍스트 입력
  - 힌트 목록 표시 및 삭제 기능

#### 예상 작업 시간
3-4일

---

### 3. 비디오 재생 구간 커스터마이징 ⏯️

**목표**: 플레이리스트 관리자가 각 트랙의 재생 시작/종료 시점을 자유롭게 설정

#### 현재 상태
✅ **백엔드 로직 구현 완료**
- YouTube Service에서 `startSeconds`, `endSeconds` 자동 계산 중
- 현재: 곡의 중간 30초 구간 자동 선택 (`youtube.ts:88-95`)

#### 구현 내용

##### 3.1 플레이리스트 JSON 스키마 확장
- [ ] **PlaylistTrack에 선택적 필드 추가**
  ```typescript
  interface PlaylistTrack {
    videoId: string;
    answers: string[];
    startSeconds?: number;  // 커스텀 시작 시간 (선택)
    endSeconds?: number;    // 커스텀 종료 시간 (선택)
    hints?: Hint[];
  }
  ```

##### 3.2 YouTube Service 수정
- [ ] **커스텀 구간 우선순위 처리**
  ```typescript
  // playlists.json에 startSeconds가 있으면 그것을 사용
  // 없으면 기존처럼 자동 계산
  const startSeconds = playlistTrack?.startSeconds ??
    Math.floor((totalDuration - 30) / 2);
  ```

##### 3.3 플레이리스트 관리 페이지 UI
- [ ] **재생 구간 설정 섹션 추가**
  - 시작 시간 입력 (초)
  - 종료 시간 입력 (초)
  - 미리보기 버튼: YouTube Player로 해당 구간 재생
  - 자동 계산 버튼: 기본값(중간 30초)으로 리셋

##### 3.4 시각적 구간 선택 (선택 사항)
- [ ] **타임라인 슬라이더**
  - 비디오 전체 길이를 타임라인으로 표시
  - 드래그로 시작/종료 지점 선택
  - 참고: HTML5 `<input type="range">` 또는 라이브러리 활용

#### 예상 작업 시간
2-3일

---

### 4. 정답 후 뮤직비디오 재생 🎬

**목표**: 라운드 종료 후 정답 영상을 재생하여 플레이어들에게 피드백 제공

#### 구현 내용

##### 4.1 라운드 종료 후 대기 화면
- [ ] **준비 패널에 YouTube Player 추가**
  - 현재: 다음 라운드 대기 중 빈 화면
  - 개선: 정답 영상 재생

##### 4.2 재생 로직
- [ ] **서버에서 정답 트랙 정보 전송**
  ```typescript
  // round-ended 이벤트에 정답 트랙의 전체 정보 포함
  io.to(roomCode).emit("round-ended", {
    result: {
      track: fullTrackInfo,  // startSeconds, endSeconds 포함
      // ...
    }
  });
  ```

- [ ] **클라이언트에서 영상 재생**
  - 라운드 종료 시 정답 트랙으로 YouTube Player 업데이트
  - 설정된 `startSeconds`부터 재생 (커스텀 또는 자동 계산된 구간)
  - 음소거 해제하여 재생
  - `endSeconds`에 도달하면 자동 정지

##### 4.3 UI/UX
- [ ] **정답 화면 레이아웃**
  - 상단: 정답 정보 (곡명, 아티스트)
  - 중앙: YouTube Player (뮤직비디오 재생)
  - 하단: 플레이어별 점수 및 정답/오답 표시
  - "다음 라운드" 버튼 (호스트만 표시)

##### 4.4 자동 진행
- [ ] **타이머 옵션 추가**
  - 설정: "라운드 종료 후 자동 진행 시간" (예: 10초)
  - 타이머가 끝나면 자동으로 다음 라운드 준비
  - 진행 바 표시

#### 예상 작업 시간
2-3일

---

## 🔧 기술적 고려사항

### YouTube Player API 제약
- **임베드 제한**: 일부 비디오는 재생 불가 (150 에러)
  - 현재: 자동 스킵 구현 완료 ✅
  - 추가: 사전 검증 기능 고려

### 성능 최적화
- **힌트 타이머 관리**
  - 라운드 종료 시 모든 setTimeout 정리 필요
  - 메모리 누수 방지

### 상태 관리
- **GameStore 확장**
  - 현재 힌트 상태
  - 정답 영상 재생 상태
  - 애니메이션 상태

---

## 📅 작업 일정

| 작업 | 우선순위 | 예상 기간 | 실제 기간 | 상태 |
|------|---------|----------|----------|------|
| ~~1. UI/UX 실시간 반응~~ | ~~높음~~ | ~~2-3일~~ | **3시간** | ✅ **완료** |
| 2. 힌트 시스템 | 높음 | 3-4일 | - | ⏳ 대기 |
| 3. 재생 구간 설정 | 중간 | 2-3일 | - | ⏳ 대기 |
| 4. 정답 영상 재생 | 중간 | 2-3일 | - | ⏳ 대기 |

**총 예상 기간**: 1-2주 (남은 작업)

---

## 🎨 추가 개선 아이디어 (차순위)

### UI/UX
- [ ] 다크 모드 지원
- [ ] 모바일 반응형 개선
- [ ] 게임 결과 공유 기능 (스크린샷, 링크)

### 기능
- [ ] 난이도 설정 (힌트 개수, 답안 시간 조절)
- [ ] 리플레이 기능
- [ ] 통계 대시보드 (정답률, 평균 시간 등)

### 소셜
- [ ] 친구 초대 시스템
- [ ] 리더보드 (일간, 주간, 월간)
- [ ] 업적/뱃지 시스템

---

**작성일**: 2025-11-25
**검토 필요**: 구현 전 팀 회의에서 우선순위 재조정
